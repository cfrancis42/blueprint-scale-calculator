<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blueprint Scale Calculator</title>
<meta name="theme-color" content="#0b6bff" />
  <style>
  :root {
    --pad: 14px;
    --radius: 14px;
    --accent: #0b6bff;
    --accent-soft: #eef3ff;
    --bg: #f3f5fb;
    --card-bg: #ffffff;
    --text-main: #111827;
    --text-muted: #6b7280;
    --border-subtle: #e2e4f0;
  }

  * {
    box-sizing: border-box;
    font-family: system-ui, -apple-system, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at top left, #e4ecff 0, #f7f7fb 38%, #edf3ff 100%);
    color: var(--text-main);
    display: flex;
    flex-direction: column;
  }

  header {
    padding: 24px 16px 8px;
    text-align: center;
  }

  h1 {
    margin: 0 0 6px;
    font-size: clamp(1.6rem, 2.1vw, 1.9rem);
    letter-spacing: 0.02em;
  }

  p.sub {
    margin: 0;
    color: var(--text-muted);
    font-size: 0.95rem;
  }

  p.sub b {
    color: var(--accent);
  }

  .wrap {
    max-width: 960px;
    width: 100%;
    margin: 0 auto;
    padding: 0 16px 32px;
  }

  .card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 18px 18px 16px;
    box-shadow: 0 18px 45px rgba(15, 23, 42, 0.06);
    margin-bottom: 16px;
    border: 1px solid rgba(226, 232, 240, 0.9);
    transform: translateY(0);
    transition: box-shadow 0.18s ease-out, transform 0.18s ease-out, border-color 0.18s ease-out;
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 22px 60px rgba(15, 23, 42, 0.08);
    border-color: rgba(191, 219, 254, 0.9);
  }

  .card h3 {
    margin-top: 0;
    margin-bottom: 8px;
    font-size: 1.05rem;
  }

  .grid {
    display: grid;
    gap: 12px;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  label {
    display: block;
    font-weight: 600;
    margin-bottom: 6px;
    font-size: 0.92rem;
  }

  input,
  select,
  button {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #d5d7df;
    border-radius: 10px;
    background: #fff;
    font-size: 0.98rem;
    transition: border-color 0.16s ease-out, box-shadow 0.16s ease-out, transform 0.08s ease-out, background-color 0.16s ease-out;
  }

  input:focus,
  select:focus {
    outline: none;
    border-color: #93c5fd;
    box-shadow: 0 0 0 2px rgba(147, 197, 253, 0.6);
  }

  .btns {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  button {
    cursor: pointer;
  }

  button.primary {
    background: var(--accent);
    color: #ffffff;
    border: none;
    font-weight: 600;
    box-shadow: 0 10px 25px rgba(37, 99, 235, 0.26);
  }

  button.primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 14px 28px rgba(37, 99, 235, 0.32);
  }

  button.primary:active {
    transform: translateY(0);
    box-shadow: 0 8px 18px rgba(37, 99, 235, 0.25);
  }

  button.secondary {
    background: var(--accent-soft);
    color: #1d4ed8;
    border: 1px solid #bfdbfe;
    font-weight: 500;
  }

  button.secondary:hover {
    background: #e0ebff;
  }

  .output {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono";
    background: #020617;
    color: #e5e7eb;
    border-radius: 12px;
    padding: 11px 12px;
    white-space: pre-wrap;
    font-size: 0.93rem;
    line-height: 1.4;
    border: 1px solid #1f2937;
  }

  .hint {
    color: var(--text-muted);
    font-size: 0.88rem;
  }

  .footer {
    text-align: center;
    color: var(--text-muted);
    font-size: 0.9rem;
    padding-top: 4px;
  }

  .locknote {
    margin-top: 8px;
    font-size: 0.9rem;
    padding: 8px 10px;
    border-radius: 9px;
    background: #f9fafb;
    border: 1px dashed #e5e7eb;
  }

  .locknote b {
    color: #1d4ed8;
  }

  .locknote a {
    margin-top: 6px;
    display: inline-block;
    padding: 8px 11px;
    border-radius: 999px;
    background: var(--accent);
    color: #fff;
    text-decoration: none;
    font-size: 0.86rem;
    font-weight: 600;
    box-shadow: 0 8px 18px rgba(37, 99, 235, 0.28);
    transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, background-color 0.12s ease-out;
  }

  .locknote a:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 26px rgba(37, 99, 235, 0.35);
    background-color: #0a5ae6;
  }

  .locknote a:active {
    transform: translateY(0);
    box-shadow: 0 7px 16px rgba(37, 99, 235, 0.28);
  }

  .card h4 {
    margin: 0 0 4px;
    font-size: 0.96rem;
  }

  ol {
    padding-left: 20px;
    margin-top: 2px;
    margin-bottom: 0;
  }

  @media (max-width: 600px) {
    header {
      padding-top: 18px;
    }
    .card {
      padding: 16px 14px 14px;
      border-radius: 12px;
    }
  }
</style>
</head>
<body>
  <header>
    <h1>Blueprint Scale Calculator</h1>
    <p class="sub">Free: <b>1/4″ = 1′</b>. Unlock all scales for a one-time purchase.</p>
  </header>

  <div class="wrap">

    <!-- SCALE (show all, lock unless entitled) -->
    <div class="card">
      <h3>Scale</h3>
      <div class="grid">
        <div>
          <label>Preset (X″ on plan = Y′ real)</label>
          <select id="scalePreset">
            <option value="0.125,1">1/8″ = 1′</option>
            <option value="0.1875,1">3/16″ = 1′</option>
            <option value="0.25,1" selected>1/4″ = 1′ (Free)</option>
            <option value="0.375,1">3/8″ = 1′</option>
            <option value="0.5,1">1/2″ = 1′</option>
            <option value="1,1">1″ = 1′</option>
            <option value="custom">Custom…</option>
          </select>

          <div class="grid" style="margin-top:10px;">
            <div>
              <label>X inches on plan</label>
              <input id="scaleInches" placeholder='e.g., 1/4' value="1/4" />
            </div>
            <div>
              <label>Y feet in real life</label>
              <input id="scaleFeet" placeholder="e.g., 1" value="1" />
            </div>
          </div>

          
          <div class="locknote" id="proHint">
            Only <b>1/4″ = 1′</b> is available in the free version.
            <a id="unlockBtn"
   href="https://buy.stripe.com/8x26oJd5r9tNgjA9PHejK00"
   style="display:inline-block;padding:10px 14px;border-radius:10px;background:#0b6bff;color:#fff;text-decoration:none;">
  Unlock all scales
</a>

          </div>
        </div>

        <div>
          <label>Inch rounding</label>
          <select id="rounding">
            <option value="1">Nearest 1″</option>
            <option value="1/2">Nearest 1/2″</option>
            <option value="1/4">Nearest 1/4″</option>
            <option value="1/8">Nearest 1/8″</option>
            <option value="1/16" selected>Nearest 1/16″</option>
            <option value="1/32">Nearest 1/32″</option>
          </select>
        </div>
      </div>
      <p class="hint">You can enter mixed fractions like <b>1 13/16</b>.</p>
    </div>

    <!-- PLAN → REAL -->
    <div class="card">
      <h3>Plan ➜ Real</h3>
      <div class="grid">
        <div>
          <label>Blueprint measurement (inches)</label>
          <input id="planInches" placeholder='e.g., 9/16, 1 3/8, or 2.5' />
          <div class="hint">Enter inches only.</div>
        </div>
      </div>
      <div class="btns" style="margin-top:10px;">
        <button class="primary" id="btnPlanToReal">Convert to Real Size</button>
        <button class="secondary" id="btnExample">Try 9/16″ at 1/4″ = 1′</button>
      </div>
      <div class="output" id="outPlanToReal" style="margin-top:12px;">Result will appear here…</div>
    </div>

    <!-- REAL → PLAN -->
    <div class="card">
      <h3>Real ➜ Plan</h3>
      <div class="grid">
        <div>
          <label>Real length (feet)</label>
          <input id="realFeet" placeholder="e.g., 2" />
        </div>
        <div>
          <label>Real length (inches)</label>
          <input id="realInches" placeholder='e.g., 3 or 3/4 or 3.5' />
          <div class="hint">Leave feet blank if you just want inches.</div>
        </div>
      </div>
      <div class="btns" style="margin-top:10px;">
        <button class="primary" id="btnRealToPlan">Convert to Plan Size</button>
      </div>
      <div class="output" id="outRealToPlan" style="margin-top:12px;">Result will appear here…</div>
    </div>
<!-- HELP / INFO -->
    <div class="card">
      <h3>Help / Info</h3>
      <p class="hint"><strong>Add to Home Screen</strong></p>

      <div style="display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin-top:6px;">
        <div>
          <h4 style="margin:0 0 4px;font-size:1rem;">iPhone (Safari)</h4>
          <ol style="margin:0;padding-left:20px;font-size:0.95rem;">
            <li>Tap the <strong>Share</strong> icon</li>
            <li>Select <strong>Add to Home Screen</strong></li>
            <li>Tap <strong>Add</strong></li>
          </ol>
        </div>

        <div>
          <h4 style="margin:0 0 4px;font-size:1rem;">Android (Chrome)</h4>
          <ol style="margin:0;padding-left:20px;font-size:0.95rem;">
            <li>Tap the <strong>⋮</strong> menu</li>
            <li>Choose <strong>Add to Home screen</strong></li>
            <li>Confirm</li>
          </ol>
        </div>
      </div>
    </div>

    <!-- Existing footer card -->
    <div class="card">
      <div class="footer">
        <p><small>© 2025 This app is provided as-is.</small></p>
      </div>
    </div>


<script>
  const DISABLE_PAYWALL = true;

  // ---------- ENTITLEMENT ----------
  function isEntitled() {
    if (DISABLE_PAYWALL) return true;
    try { return !!localStorage.getItem("entitlement"); } catch { return false; }
  }
  function setEntitled(token) {
    try { localStorage.setItem("entitlement", token); } catch {}
  }

  // ---------- PARSER ----------
  function parseNumberish(str) {
    if (!str) return NaN;
    str = (''+str).trim();
    if (!str) return NaN;

    const mixed = str.match(/^(-?\d+)\s+(\d+)\/(\d+)$/);
    if (mixed) {
      const whole = parseFloat(mixed[1]);
      const num = parseFloat(mixed[2]);
      const den = parseFloat(mixed[3]);
      if (!den) return NaN;
      return whole + (whole < 0 ? -num/den : num/den);
    }

    const frac = str.match(/^(-?\d+)\/(\d+)$/);
    if (frac) {
      const num = parseFloat(frac[1]);
      const den = parseFloat(frac[2]);
      if (!den) return NaN;
      return num/den;
    }

    const val = parseFloat(str);
    return isNaN(val) ? NaN : val;
  }

  // ---------- ROUNDING & FORMATTING ----------
  function roundToFractionInches(inches, fracStr) {
    if (!fracStr || fracStr === "1") return Math.round(inches);
    const parts = fracStr.split('/');
    if (parts.length !== 2) return inches;
    const denom = parseFloat(parts[1]);
    if (!denom || isNaN(denom)) return inches;
    const step = 1/denom;
    return Math.round(inches/step)*step;
  }

  function formatFeetInches(feetDecimal, rounding) {
    if (!isFinite(feetDecimal)) return "—";
    let feet = Math.trunc(feetDecimal);
    let inches = (feetDecimal - feet) * 12;
    inches = roundToFractionInches(inches, rounding);
    if (Math.abs(inches - 12) < 1e-9) { feet += 1; inches = 0; }

    function toFraction(inchVal, rounding) {
      if (rounding === "1") return {whole: Math.round(inchVal), num: 0, den: 1};
      const parts = rounding.split('/');
      const den = parseInt(parts[1] || "16", 10);
      const whole = Math.trunc(inchVal);
      const frac = inchVal - whole;
      const num = Math.round(frac * den);
      function gcd(a,b){ return b ? gcd(b, a%b) : a; }
      const g = gcd(num, den) || 1;
      return {whole, num: num/g, den: den/g};
    }

    const f = toFraction(inches, rounding);
    let inchStr = "";
    if (Math.abs(f.num) < 1e-9) inchStr = `${Math.round(inches)}″`;
    else if (f.whole > 0) inchStr = `${f.whole} ${f.num}/${f.den}″`;
    else inchStr = `${f.num}/${f.den}″`;
    return `${feet}′-${inchStr}`;
  }

  function toNearestFraction(inches, denom) {
    const whole = Math.trunc(inches);
    const frac = inches - whole;
    const num = Math.round(frac * denom);
    function gcd(a,b){ return b ? gcd(b, a%b) : a; }
    const g = gcd(num, denom) || 1;
    const numR = num/g, denR = denom/g;
    if (numR === 0) return `${whole}`;
    if (whole === 0) return `${numR}/${denR}`;
    return `${whole} ${numR}/${denR}`;
  }

  // ---------- SCALE HELPERS ----------
  function setScaleInputsFromPreset() {
    const presetVal = document.getElementById('scalePreset').value;
    const inches = document.getElementById('scaleInches');
    const feet = document.getElementById('scaleFeet');
    if (presetVal === "custom") return;
    const [x, y] = presetVal.split(',').map(Number);
    if (!isNaN(x) && !isNaN(y)) {
      inches.value = x === 0.25 ? "1/4" :
                     x === 0.125 ? "1/8" :
                     x === 0.1875 ? "3/16" :
                     x === 0.375 ? "3/8" :
                     x === 0.5 ? "1/2" :
                     x === 1 ? "1" : x.toString();
      feet.value = y.toString();
    }
  }

  function getScaleFactorFeetPerInch() {
    const X = parseNumberish(document.getElementById('scaleInches').value);
    const Y = parseNumberish(document.getElementById('scaleFeet').value);
    if (!isFinite(X) || X <= 0 || !isFinite(Y) || Y <= 0) return NaN;
    return Y / X; // feet per 1" on plan
  }

  // ---------- CONVERSIONS ----------
  function convertPlanToReal() {
    const planInches = parseNumberish(document.getElementById('planInches').value);
    const fpi = getScaleFactorFeetPerInch();
    const rounding = document.getElementById('rounding').value;
    const out = document.getElementById('outPlanToReal');

    if (!isFinite(planInches) || planInches < 0) {
      out.textContent = "Please enter a valid plan inches value."; 
      return;
    }
    if (!isFinite(fpi)) {
      out.textContent = "Please enter a valid scale."; 
      return;
    }

    const realFeetDecimal = planInches * fpi;
    const pretty = formatFeetInches(realFeetDecimal, rounding);
    const inchesTotal = realFeetDecimal * 12;

    out.textContent =
`REAL SIZE
• Feet & inches: ${pretty}
• Decimal feet: ${realFeetDecimal.toFixed(4)} ft
• Decimal inches: ${inchesTotal.toFixed(2)} in`;
  }

  function convertRealToPlan() {
    const feet = parseNumberish(document.getElementById('realFeet').value);
    const inches = parseNumberish(document.getElementById('realInches').value);
    const fpi = getScaleFactorFeetPerInch();
    const out = document.getElementById('outRealToPlan');

    const feetVal = isFinite(feet) ? feet : 0;
    const inchesVal = isFinite(inches) ? inches : 0;

    if ((!isFinite(feetVal) || feetVal < 0) && (!isFinite(inchesVal) || inchesVal < 0)) {
      out.textContent = "Please enter a real-world length in feet and/or inches."; 
      return;
    }
    if (!isFinite(fpi)) {
      out.textContent = "Please enter a valid scale."; 
      return;
    }

    const totalFeet = (feetVal >= 0 ? feetVal : 0) + (inchesVal >= 0 ? inchesVal : 0)/12;
    const planInches = totalFeet / fpi;

    out.textContent =
`PLAN SIZE
• Inches on plan: ${planInches.toFixed(3)} in
• Inches as fraction (approx): ${toNearestFraction(planInches, 16)} in
• Decimal feet on plan: ${(planInches/12).toFixed(4)} ft`;
  }

  // ---------- PAYWALL (disabled for now) ----------
  function applyPaywall() {
    const proHint = document.getElementById('proHint');

    if (DISABLE_PAYWALL) {
      // Hide the "Unlock all scales" message since everything is free right now
      if (proHint) proHint.style.display = "none";
      return;
    }

    // (If you ever set DISABLE_PAYWALL = false, we can re-enable the old paywall logic here)
  }

  // ---------- WIRE BUTTONS & LOCK SCALE INPUTS ----------
  document.addEventListener('DOMContentLoaded', () => {
    applyPaywall();

    const preset = document.getElementById('scalePreset');
    const inches = document.getElementById('scaleInches');
    const feet   = document.getElementById('scaleFeet');

    // Lock scale inputs unless "Custom" is selected
    function updateScaleLocking() {
      if (preset.value === "custom") {
        inches.disabled = false;
        feet.disabled   = false;
      } else {
        inches.disabled = true;
        feet.disabled   = true;
      }
    }

    // Initial sync from preset -> inputs, then lock appropriately
    setScaleInputsFromPreset();
    updateScaleLocking();

    // When user changes preset, update values and lock state
    preset.addEventListener('change', () => {
      setScaleInputsFromPreset();
      updateScaleLocking();
    });

    // Buttons
    document.getElementById('btnPlanToReal').addEventListener('click', convertPlanToReal);

    document.getElementById('btnExample').addEventListener('click', () => {
      document.getElementById('scalePreset').value = "0.25,1";
      setScaleInputsFromPreset();
      document.getElementById('planInches').value = "9/16";
      document.getElementById('rounding').value = "1/16";
      convertPlanToReal();
    });

    document.getElementById('btnRealToPlan').addEventListener('click', convertRealToPlan);

    // Restore (hidden for now, but keep safe)
    const restoreBtn = document.getElementById('restoreBtn');
    if (restoreBtn) {
      restoreBtn.addEventListener('click', () => {
        const tok = document.getElementById('restoreToken').value.trim();
        const msg = document.getElementById('restoreMsg');
        if (!tok) { msg.textContent = "Please paste your token."; return; }
        if (!tok.startsWith("eyJ")) { msg.textContent = "That doesn't look like a valid token."; return; }
        try {
          localStorage.setItem("entitlement", tok);
          msg.textContent = "Success! Pro is unlocked on this device.";
          location.reload();
        } catch (e) {
          msg.textContent = "Could not save token: " + e.message;
        }
      });
    }
  });
</script>

<style>
  #restore { display: none; }
</style>
    
<div id="restore" style="margin-top:1rem;border-top:1px solid #ddd;padding-top:0.75rem">
  <strong>Restore purchase</strong>
  <p style="margin:0.5rem 0">
    If you saved your unlock token from the thank-you page, paste it here to restore Pro on this device.
  </p>
  <input id="restoreToken" type="text" placeholder="Paste unlock token (starts with eyJ…)" style="width:90%;max-width:560px">
  <button id="restoreBtn">Restore</button>
  <div id="restoreMsg" style="margin-top:6px;color:#444"></div>
</div>





  
  
</body>
</html>
